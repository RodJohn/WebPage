
# 概述

package.json 文件

管理本地安装 npm 包的最好方式就是创建 package.json 文件。

一个 package.json 文件可以有以下几点作用：

作为一个描述文件，描述了你的项目依赖哪些包
允许我们使用 “语义化版本规则”（后面介绍）指明你项目依赖包的版本
让你的构建更好地与其他开发者分享，便于重复使用


# 创建

  使用 npm init 即可在当前目录创建一个 package.json 文件：
  
  如图所示，输入 npm init 后会弹出一堆问题，我们可以输入对应内容，也可以使用默认值。在回答一堆问题后输入 yes 就会生成图中所示内容的 package.json 文件。
  
  如果嫌回答这一大堆问题麻烦，可以直接输入 npm init --yes 跳过回答问题步骤，直接生成默认值的 package.json 文件：
  

#   内容


package.json 文件至少要有两部分内容：

“name” 
全部小写，没有空格，可以使用下划线或者横线
“version” 
x.x.x 的格式
符合“语义化版本规则”

description：描述信息，有助于搜索
main: 入口文件，一般都是 index.js
scripts：支持的脚本，默认是一个空的 test
keywords：关键字，有助于在人们使用 npm search 搜索时发现你的项目
author：作者信息
license：默认是 MIT
bugs：当前项目的一些错误信息，如果有的话

  Package.json 属性说明
  name - 包名。
  
  version - 包的版本号。
  
  description - 包的描述。
  
  homepage - 包的官网 url 。
  
  author - 包的作者姓名。
  
  contributors - 包的其他贡献者姓名。
  
  dependencies - 依赖包列表。如果依赖包没有安装，npm 会自动将依赖包安装在 node_module 目录下。
  
  repository - 包代码存放的地方的类型，可以是 git 或 svn，git 可在 Github 上。
  
  main - main 字段指定了程序的主入口文件，require('moduleName') 就会加载这个文件。这个字段的默认值是模块根目录下面的 index.js。
  
  keywords - 关键字
  
  


如果 package.json 中没有 description 信息，npm 使用项目中的 README.md 的第一行作为描述信息。
这个描述信息有助于别人搜索你的项目，因此建议好好写 description 信息。


# 指定依赖的包


我们需要在 package.json 文件中指定项目依赖的包，这样别人在拿到这个项目时才可以使用 npm install 下载。

包有两种依赖方式：

dependencies：在生产环境中需要用到的依赖
devDependencies：在开发、测试环境中用到的依赖


    {
        "name": "my-weex-demo",
        "version": "1.0.0",
        "description": "a weex project",
        "main": "index.js",
        "scripts": {
            "build": "weex-builder src dist",
            "build_plugin": "webpack --config ./tools/webpack.config.plugin.js --color",
            "dev": "weex-builder src dist -w",
            "serve": "serve -p 8080"
        },
        "keywords": [
            "weex"
        ],
        "author": "fkysly@gmail.com",
        "license": "MIT",
        "devDependencies": {
            "babel-core": "^6.14.0",
            "babel-loader": "^6.2.5",
            "babel-preset-es2015": "^6.18.0",
            "vue-loader": "^10.0.2",
            "eslint": "^3.5.0",
            "serve": "^1.4.0",
            "webpack": "^1.13.2",
            "weex-loader": "^0.3.3",
            "weex-builder": "^0.2.6"
        },
        "dependencies": {
            "weex-html5": "^0.3.2",
            "weex-components": "*"
        }
    }


# 版本号规范

这就需要先了解 npm 包提供者应该注意的版本号规范。

如果一个项目打算与别人分享，应该从 1.0.0 版本开始。以后要升级版本应该遵循以下标准：

补丁版本：解决了 Bug 或者一些较小的更改，增加最后一位数字，比如 1.0.1
小版本：增加了新特性，同时不会影响之前的版本，增加中间一位数字，比如 1.1.0
大版本：大改版，无法兼容之前的，增加第一位数字，比如 2.0.0


作为使用者，我们可以在 package.json 文件中写明我们可以接受这个包的更新程度（假设当前依赖的是 1.0.4 版本）：

如果只打算接受补丁版本的更新（也就是最后一位的改变），就可以这么写： 
1.0
1.0.x
~1.0.4
如果接受小版本的更新（第二位的改变），就可以这么写： 
1
1.x
^1.0.4
如果可以接受大版本的更新（自然接受小版本和补丁版本的改变），就可以这么写： 
*
x



  